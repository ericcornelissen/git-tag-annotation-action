"use strict";var e=require("os"),t=require("fs"),n=require("path"),r=require("child_process");function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i=o(e),u=o(t),a=o(n),s=o(r),c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},f={},l={},d={};Object.defineProperty(d,"__esModule",{value:!0}),d.toCommandProperties=d.toCommandValue=void 0,d.toCommandValue=function(e){return null==e?"":"string"==typeof e||e instanceof String?e:JSON.stringify(e)},d.toCommandProperties=function(e){return Object.keys(e).length?{title:e.title,line:e.startLine,endLine:e.endLine,col:e.startColumn,endColumn:e.endColumn}:{}};var p=c&&c.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),m=c&&c.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),g=c&&c.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&p(t,e,n);return m(t,e),t};Object.defineProperty(l,"__esModule",{value:!0}),l.issue=l.issueCommand=void 0;const v=g(i.default),b=d;function _(e,t,n){const r=new h(e,t,n);process.stdout.write(r.toString()+v.EOL)}l.issueCommand=_,l.issue=function(e,t=""){_(e,{},t)};class h{constructor(e,t,n){e||(e="missing.command"),this.command=e,this.properties=t,this.message=n}toString(){let e="::"+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let n=!0;for(const r in this.properties)if(this.properties.hasOwnProperty(r)){const o=this.properties[r];o&&(n?n=!1:e+=",",e+=`${r}=${t=o,b.toCommandValue(t).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}`)}}var t;return e+=`::${function(e){return b.toCommandValue(e).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}(this.message)}`,e}}var y={},O=c&&c.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),C=c&&c.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),w=c&&c.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.hasOwnProperty.call(e,n)&&O(t,e,n);return C(t,e),t};Object.defineProperty(y,"__esModule",{value:!0}),y.issueCommand=void 0;const S=w(u.default),P=w(i.default),E=d;y.issueCommand=function(e,t){const n=process.env[`GITHUB_${e}`];if(!n)throw new Error(`Unable to find environment variable for file command ${e}`);if(!S.existsSync(n))throw new Error(`Missing file at path: ${n}`);S.appendFileSync(n,`${E.toCommandValue(t)}${P.EOL}`,{encoding:"utf8"})},function(e){var t=c&&c.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),n=c&&c.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=c&&c.__importStar||function(e){if(e&&e.__esModule)return e;var r={};if(null!=e)for(var o in e)"default"!==o&&Object.hasOwnProperty.call(e,o)&&t(r,e,o);return n(r,e),r},o=c&&c.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function u(e){try{s(r.next(e))}catch(e){i(e)}}function a(e){try{s(r.throw(e))}catch(e){i(e)}}function s(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(u,a)}s((r=r.apply(e,t||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.getState=e.saveState=e.group=e.endGroup=e.startGroup=e.info=e.notice=e.warning=e.error=e.debug=e.isDebug=e.setFailed=e.setCommandEcho=e.setOutput=e.getBooleanInput=e.getMultilineInput=e.getInput=e.addPath=e.setSecret=e.exportVariable=e.ExitCode=void 0;const u=l,s=y,f=d,p=r(i.default),m=r(a.default);var g;function v(e,t){const n=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!n)throw new Error(`Input required and not supplied: ${e}`);return t&&!1===t.trimWhitespace?n:n.trim()}function b(e,t={}){u.issueCommand("error",f.toCommandProperties(t),e instanceof Error?e.toString():e)}function _(e){u.issue("group",e)}function h(){u.issue("endgroup")}!function(e){e[e.Success=0]="Success",e[e.Failure=1]="Failure"}(g=e.ExitCode||(e.ExitCode={})),e.exportVariable=function(e,t){const n=f.toCommandValue(t);if(process.env[e]=n,process.env.GITHUB_ENV||""){const t="_GitHubActionsFileCommandDelimeter_",r=`${e}<<${t}${p.EOL}${n}${p.EOL}${t}`;s.issueCommand("ENV",r)}else u.issueCommand("set-env",{name:e},n)},e.setSecret=function(e){u.issueCommand("add-mask",{},e)},e.addPath=function(e){process.env.GITHUB_PATH||""?s.issueCommand("PATH",e):u.issueCommand("add-path",{},e),process.env.PATH=`${e}${m.delimiter}${process.env.PATH}`},e.getInput=v,e.getMultilineInput=function(e,t){return v(e,t).split("\n").filter((e=>""!==e))},e.getBooleanInput=function(e,t){const n=v(e,t);if(["true","True","TRUE"].includes(n))return!0;if(["false","False","FALSE"].includes(n))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${e}\nSupport boolean input list: \`true | True | TRUE | false | False | FALSE\``)},e.setOutput=function(e,t){process.stdout.write(p.EOL),u.issueCommand("set-output",{name:e},t)},e.setCommandEcho=function(e){u.issue("echo",e?"on":"off")},e.setFailed=function(e){process.exitCode=g.Failure,b(e)},e.isDebug=function(){return"1"===process.env.RUNNER_DEBUG},e.debug=function(e){u.issueCommand("debug",{},e)},e.error=b,e.warning=function(e,t={}){u.issueCommand("warning",f.toCommandProperties(t),e instanceof Error?e.toString():e)},e.notice=function(e,t={}){u.issueCommand("notice",f.toCommandProperties(t),e instanceof Error?e.toString():e)},e.info=function(e){process.stdout.write(e+p.EOL)},e.startGroup=_,e.endGroup=h,e.group=function(e,t){return o(this,void 0,void 0,(function*(){let n;_(e);try{n=yield t()}finally{h()}return n}))},e.saveState=function(e,t){u.issueCommand("save-state",{name:e},t)},e.getState=function(e){return process.env[`STATE_${e}`]||""}}(f);var j={exports:{}};!function(e){(()=>{var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}};void 0!==t&&(t.ab=__dirname+"/");var n={};t.r(n),t.d(n,{escape:()=>s,escapeAll:()=>c,quote:()=>f,quoteAll:()=>l});const r=i.default,o="win32";
/**
 * @overview Contains constants that may be used in multiple modules.
 * @license MPL-2.0
 * @author Eric Cornelissen <ericornelissen@gmail.com>
 */function u(e,t){if(null==(n=e)||"function"!=typeof n.toString)throw new TypeError("Shescape requires strings or values that can be converted into a string using .toString()");
/**
 * @overview Contains functionality to escape and quote shell arguments on any
 * operating system.
 * @license MPL-2.0
 * @author Eric Cornelissen <ericornelissen@gmail.com>
 */
var n;const r=e.toString();switch(t){case o:
/**
 * @overview Contains functionality specifically for Windows systems.
 * @license MPL-2.0
 * @author Eric Cornelissen <ericornelissen@gmail.com>
 */
return function(e){return e.replace(/\u{0}/gu,"").replace(/"/g,'""')}(r);default:
/**
 * @overview Contains functionality specifically for Unix systems.
 * @license MPL-2.0
 * @author Eric Cornelissen <ericornelissen@gmail.com>
 */
return function(e){return e.replace(/\u{0}/gu,"").replace(/'/g,"'\\''")}(r)}}function a(e,t){const n=u(e,t);switch(t){case o:return`"${n}"`;default:return`'${n}'`}}
/**
 * A simple shell escape package. Use it to escape user-controlled inputs to
 * shell commands to prevent shell injection.
 *
 * @example
 *   import cp from "child_process";
 *   import * as shescape from "shescape";
 *   cp.spawn("command", shescape.escapeAll(userInput), options);
 *
 * @module shescape
 * @version 1.2.1
 * @license MPL-2.0
 * @author Eric Cornelissen <ericornelissen@gmail.com>
 */function s(e){return u(e,r.platform())}function c(e){Array.isArray(e)||(e=[e]);const t=r.platform(),n=[];for(const r of e){const e=u(r,t);n.push(e)}return n}function f(e){return a(e,r.platform())}function l(e){Array.isArray(e)||(e=[e]);const t=r.platform(),n=[];for(const r of e){const e=a(r,t);n.push(e)}return n}e.exports=n})()}(j);const $=f,{exec:T}=s.default,A=j.exports;var M=function(e){try{let t=process.env.GITHUB_REF;const n=$.getInput("tag");let r;n&&(t=`refs/tags/${n}`),r=function(e){return"win32"===e}(e)?"%(contents)":"'%(contents)'",T(`git for-each-ref --format=${r} ${A.quote(t)}`,((e,t)=>{e?$.setFailed(e):$.setOutput("git-tag-annotation",t)}))}catch(e){$.setFailed(e.message)}};M(i.default.platform()),module.exports={};
